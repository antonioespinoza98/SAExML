rm(list = ls())
x <- c('rpart','rattle','DT','adabag','randomForest','haven','dplyr')
lapply(x, require, character.only = TRUE)
load("./data/pobreza/encuesta_df_agg.Rdata")
load("datos/encuesta_df_agg.Rdata")
load("datos/encuesta_df_agg.Rdata")
rm(list = ls())
x <- c('rpart','rattle','DT','adabag','randomForest','haven','dplyr')
lapply(x, require, character.only = TRUE)
load("datos/encuesta_df_agg.Rdata")
getwd()
load("pobreza/datos/encuesta_df_agg.Rdata")
rm(list = ls())
load("pobreza/datos/base.Rdata")
set.seed(10)
n = nrow(base)
s = sample(1:n, round(0.8*n))
train = base[s, ]
test = base[-s, ]
mod = rpart(pobreza ~ ., method = "class", data = train)
fancyRpartPlot(mod, palettes = c("Greens","Reds"))
dim(train)
names(train)
mod = rpart(pobreza ~ ., method = "class", data = train)
fancyRpartPlot(mod, palettes = c("Greens","Reds"))
mod$cptable
mod = rpart(pobreza ~ ., method = "class",cp = 0.01, data = train)
fancyRpartPlot(mod, palettes = c("Greens","Reds"))
mod = rpart(pobreza ~ ., method = "class",cp = 0.001, data = train)
fancyRpartPlot(mod, palettes = c("Greens","Reds"))
rm(list =ls())
encuesta_mrp <- readRDS("data/pobreza/encuesta_mrp.rds") %>%
mutate(pobreza = ifelse(ingreso <= lp, 1, 0))
encuesta_mrp <- readRDS("pobreza/datos/encuesta_mrp.rds") %>%
mutate(pobreza = ifelse(ingreso <= lp, 1, 0))
statelevel_predictors_df <- readRDS("pobreza/datos/statelevel_predictors_df.rds")
encuesta_mrp
statelevel_predictors_df$tiene_acueducto
mod = rpart(pobreza ~ ., method = "class",cp = 0.001, data = train)
rm(list = ls())
rm(list = ls())
load("pobreza/datos/base.Rdata")
set.seed(10)
n = nrow(base)
s = sample(1:n, round(0.8*n))
train = base[s, ]
test = base[-s, ]
dim(train)
dim(test)
View(train)
mod = rpart(pobreza ~ ., method = "class",cp = 0.001, data = train)
View(mod)
fancyRpartPlot(mod, palettes = c("Greens","Reds"))
mod = rpart(pobreza ~ ., method = "class",cp = 0.0001, data = train)
fancyRpartPlot(mod, palettes = c("Greens","Reds"))
mod = rpart(pobreza ~ ., method = "class",cp = 0.001, data = train)
fancyRpartPlot(mod, palettes = c("Greens","Reds"))
mod = rpart(pobreza ~ ., method = "class",cp = 0.005, data = train)
fancyRpartPlot(mod, palettes = c("Greens","Reds"))
mod = rpart(pobreza ~ ., method = "class",cp = 0.001, data = train)
fancyRpartPlot(mod, palettes = c("Greens","Reds"))
mod = rpart(pobreza ~ ., method = "class",cp = 0.0009, data = train)
fancyRpartPlot(mod, palettes = c("Greens","Reds"))
mod = rpart(pobreza ~ ., method = "class",cp = 0.0005, data = train)
fancyRpartPlot(mod, palettes = c("Greens","Reds"))
mod = rpart(pobreza ~ ., method = "class",cp = 0.0001, data = train)
mod = rpart(pobreza ~ ., method = "class",cp = 0.0002, data = train)
fancyRpartPlot(mod, palettes = c("Greens","Reds"))
mod = rpart(pobreza ~ ., method = "class",cp = 0.0005, data = train)
fancyRpartPlot(mod, palettes = c("Greens","Reds"))
mod = rpart(pobreza ~ ., method = "class",cp = 0.0004, data = train)
mod = rpart(pobreza ~ ., method = "class",cp = 0.0004, data = train)
```{r}
fancyRpartPlot(mod, palettes = c("Greens","Reds"))
mod = rpart(pobreza ~ ., method = "class",cp = 0.0003, data = train)
fancyRpartPlot(mod, palettes = c("Greens","Reds"))
window();fancyRpartPlot(mod, palettes = c("Greens","Reds"))
windows();fancyRpartPlot(mod, palettes = c("Greens","Reds"))
118/2
mod = rpart(pobreza ~ ., method = "class",cp = 0.0003, data = train, maxdepth = 5)
windows();fancyRpartPlot(mod, palettes = c("Greens","Reds"))
fancyRpartPlot(mod, palettes = c("Greens","Reds"))
mod = rpart(pobreza ~ ., method = "class",cp = 0.0003, data = train, maxdepth = 5)
fancyRpartPlot(mod, palettes = c("Greens","Reds"))
mod = rpart(pobreza ~ ., method = "class",cp = 0.0003, data = train, maxdepth = 6)
fancyRpartPlot(mod, palettes = c("Greens","Reds"))
